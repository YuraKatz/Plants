<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢—Ä–µ–∫–µ—Ä –ø–æ–ª–∏–≤–∞ - Plants Care</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        header {
            text-align: center;
            margin-bottom: 30px;
        }
        h1 { color: #2d3748; font-size: 2rem; margin-bottom: 10px; }
        .subtitle { color: #718096; font-size: 1rem; }

        .nav-back {
            display: inline-block;
            margin-bottom: 20px;
            text-decoration: none;
            color: #667eea;
            font-weight: 600;
        }
        .nav-back:hover { text-decoration: underline; }

        /* Canister Cards */
        .canisters {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 30px;
        }

        .canister-tracker {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border: 3px solid #e2e8f0;
        }
        .canister-tracker.a { border-color: #4299e1; }
        .canister-tracker.b { border-color: #48bb78; }
        .canister-tracker.c { border-color: #a0aec0; }

        .canister-header {
            padding: 15px 20px;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .canister-tracker.a .canister-header { background: linear-gradient(135deg, #4299e1, #3182ce); }
        .canister-tracker.b .canister-header { background: linear-gradient(135deg, #48bb78, #38a169); }
        .canister-tracker.c .canister-header { background: linear-gradient(135deg, #a0aec0, #718096); }

        .canister-title {
            font-size: 1.2rem;
            font-weight: 700;
        }
        .canister-subtitle {
            font-size: 0.85rem;
            opacity: 0.9;
        }

        .canister-body {
            padding: 20px;
        }

        /* Watering Counter */
        .watering-counter {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        .watering-dot {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid #e2e8f0;
            background: white;
            color: #718096;
        }
        .watering-dot.completed {
            background: #48bb78;
            border-color: #38a169;
            color: white;
        }
        .watering-dot.current {
            background: #4299e1;
            border-color: #3182ce;
            color: white;
            transform: scale(1.15);
            box-shadow: 0 4px 15px rgba(66, 153, 225, 0.4);
        }
        .watering-dot.flush {
            background: #ed8936;
            border-color: #dd6b20;
            color: white;
        }
        .watering-dot.flush.current {
            background: #ed8936;
            border-color: #dd6b20;
            transform: scale(1.15);
            box-shadow: 0 4px 15px rgba(237, 137, 54, 0.4);
        }

        /* Status */
        .watering-status {
            text-align: center;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 15px;
            font-weight: 600;
        }
        .status-feed {
            background: #c6f6d5;
            color: #22543d;
        }
        .status-flush {
            background: #feebc8;
            color: #744210;
        }

        /* Last Watered */
        .last-watered {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            background: #f7fafc;
            border-radius: 10px;
            margin-bottom: 15px;
        }
        .last-watered-label {
            color: #718096;
            font-size: 0.9rem;
        }
        .last-watered-date {
            font-weight: 600;
            color: #2d3748;
        }
        .days-ago {
            font-size: 0.85rem;
            color: #718096;
        }

        /* Buttons */
        .action-buttons {
            display: flex;
            gap: 10px;
        }
        .btn {
            flex: 1;
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        .btn-water {
            background: linear-gradient(135deg, #48bb78, #38a169);
            color: white;
        }
        .btn-water:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(72, 187, 120, 0.4);
        }
        .btn-water.flush {
            background: linear-gradient(135deg, #ed8936, #dd6b20);
        }
        .btn-water.flush:hover {
            box-shadow: 0 4px 15px rgba(237, 137, 54, 0.4);
        }
        .btn-reset {
            background: #edf2f7;
            color: #718096;
            flex: 0.3;
        }
        .btn-reset:hover {
            background: #e2e8f0;
        }

        /* Recipe Reminder */
        .recipe-reminder {
            margin-top: 15px;
            padding: 15px;
            background: #ebf8ff;
            border-radius: 10px;
            border-left: 4px solid #4299e1;
            font-size: 0.9rem;
        }
        .recipe-reminder.flush {
            background: #fffaf0;
            border-left-color: #ed8936;
        }
        .recipe-reminder strong {
            display: block;
            margin-bottom: 5px;
            color: #2c5282;
        }
        .recipe-reminder.flush strong {
            color: #c05621;
        }

        /* DYNOMYCO Toggle */
        .dynomyco-toggle {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 15px;
            background: #faf5ff;
            border-radius: 10px;
            margin-bottom: 15px;
            border: 2px solid #e9d8fd;
        }
        .dynomyco-label {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            color: #553c9a;
        }
        .toggle-switch {
            position: relative;
            width: 50px;
            height: 26px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #cbd5e0;
            transition: 0.3s;
            border-radius: 26px;
        }
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
        }
        input:checked + .toggle-slider {
            background-color: #9f7aea;
        }
        input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }

        /* History */
        .history-section {
            margin-top: 30px;
            padding: 20px;
            background: #f7fafc;
            border-radius: 16px;
        }
        .history-section h3 {
            margin-bottom: 15px;
            color: #2d3748;
        }
        .history-list {
            max-height: 200px;
            overflow-y: auto;
        }
        .history-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: white;
            border-radius: 8px;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        .history-canister {
            font-weight: 600;
            padding: 4px 10px;
            border-radius: 15px;
            color: white;
        }
        .history-canister.a { background: #4299e1; }
        .history-canister.b { background: #48bb78; }
        .history-canister.c { background: #a0aec0; }
        .history-type {
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
        }
        .history-type.feed { background: #c6f6d5; color: #22543d; }
        .history-type.flush { background: #feebc8; color: #744210; }
        .history-date {
            color: #718096;
        }

        .clear-history {
            margin-top: 10px;
            padding: 8px 15px;
            background: #fed7d7;
            color: #c53030;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.85rem;
        }
        .clear-history:hover {
            background: #feb2b2;
        }

        /* Summary */
        .summary-bar {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }
        .summary-item {
            text-align: center;
            padding: 15px;
            background: #f7fafc;
            border-radius: 12px;
        }
        .summary-number {
            font-size: 2rem;
            font-weight: 800;
            color: #2d3748;
        }
        .summary-label {
            font-size: 0.85rem;
            color: #718096;
        }

        @media (max-width: 600px) {
            .container { padding: 15px; }
            .watering-dot { width: 40px; height: 40px; font-size: 1rem; }
            .action-buttons { flex-direction: column; }
            .btn-reset { flex: 1; }
            .summary-bar { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="nav-back">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>

        <header>
            <h1>üíß –¢—Ä–µ–∫–µ—Ä –ø–æ–ª–∏–≤–∞</h1>
            <p class="subtitle">–û—Ç—Å–ª–µ–∂–∏–≤–∞–π –ø–æ–ª–∏–≤—ã –∏ –Ω–µ –∑–∞–±—ã–≤–∞–π –ø—Ä–æ –ø—Ä–æ–º—ã–≤–∫—É!</p>
        </header>

        <!-- Summary -->
        <div class="summary-bar">
            <div class="summary-item">
                <div class="summary-number" id="totalWaterings">0</div>
                <div class="summary-label">–í—Å–µ–≥–æ –ø–æ–ª–∏–≤–æ–≤</div>
            </div>
            <div class="summary-item">
                <div class="summary-number" id="totalFlushes">0</div>
                <div class="summary-label">–ü—Ä–æ–º—ã–≤–æ–∫</div>
            </div>
            <div class="summary-item">
                <div class="summary-number" id="dynoCount">0</div>
                <div class="summary-label">DYNOMYCO</div>
            </div>
        </div>

        <!-- Canisters -->
        <div class="canisters">
            <!-- Canister A -->
            <div class="canister-tracker a" id="canisterA">
                <div class="canister-header">
                    <div>
                        <div class="canister-title">–ö–∞–Ω–∏—Å—Ç—Ä–∞ A</div>
                        <div class="canister-subtitle">–ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ ‚Ä¢ PPM 80 ‚Ä¢ pH 5.8-6.3</div>
                    </div>
                </div>
                <div class="canister-body">
                    <div class="watering-counter" id="counterA">
                        <div class="watering-dot" data-num="1">1</div>
                        <div class="watering-dot" data-num="2">2</div>
                        <div class="watering-dot" data-num="3">3</div>
                        <div class="watering-dot flush" data-num="4">4</div>
                    </div>
                    <div class="watering-status status-feed" id="statusA">
                        üåø –°–ª–µ–¥—É—é—â–∏–π: –ø–æ–ª–∏–≤ —Å —É–¥–æ–±—Ä–µ–Ω–∏—è–º–∏
                    </div>
                    <div class="last-watered">
                        <span class="last-watered-label">–ü–æ—Å–ª–µ–¥–Ω–∏–π –ø–æ–ª–∏–≤:</span>
                        <span>
                            <span class="last-watered-date" id="lastDateA">‚Äî</span>
                            <span class="days-ago" id="daysAgoA"></span>
                        </span>
                    </div>
                    <div class="dynomyco-toggle">
                        <span class="dynomyco-label">üçÑ –î–æ–±–∞–≤–∏—Ç—å DYNOMYCO</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="dynoA">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="action-buttons">
                        <button class="btn btn-water" id="btnA" onclick="logWatering('A')">
                            üíß –ü–æ–ª–∏–ª!
                        </button>
                        <button class="btn btn-reset" onclick="resetCanister('A')">‚Ü∫</button>
                    </div>
                    <div class="recipe-reminder" id="recipeA">
                        <strong>üìã –†–µ—Ü–µ–ø—Ç:</strong>
                        CalMag ‚Üí PPM 80 ‚Üí Universal 1.5 –º–ª/–ª ‚Üí pH 5.8-6.3
                    </div>
                </div>
            </div>

            <!-- Canister B -->
            <div class="canister-tracker b" id="canisterB">
                <div class="canister-header">
                    <div>
                        <div class="canister-title">–ö–∞–Ω–∏—Å—Ç—Ä–∞ B</div>
                        <div class="canister-subtitle">–ê—Ä–æ–∏–¥–Ω—ã–µ ‚Ä¢ PPM 120 ‚Ä¢ pH 6.0-6.5</div>
                    </div>
                </div>
                <div class="canister-body">
                    <div class="watering-counter" id="counterB">
                        <div class="watering-dot" data-num="1">1</div>
                        <div class="watering-dot" data-num="2">2</div>
                        <div class="watering-dot" data-num="3">3</div>
                        <div class="watering-dot flush" data-num="4">4</div>
                    </div>
                    <div class="watering-status status-feed" id="statusB">
                        üåø –°–ª–µ–¥—É—é—â–∏–π: –ø–æ–ª–∏–≤ —Å —É–¥–æ–±—Ä–µ–Ω–∏—è–º–∏
                    </div>
                    <div class="last-watered">
                        <span class="last-watered-label">–ü–æ—Å–ª–µ–¥–Ω–∏–π –ø–æ–ª–∏–≤:</span>
                        <span>
                            <span class="last-watered-date" id="lastDateB">‚Äî</span>
                            <span class="days-ago" id="daysAgoB"></span>
                        </span>
                    </div>
                    <div class="dynomyco-toggle">
                        <span class="dynomyco-label">üçÑ –î–æ–±–∞–≤–∏—Ç—å DYNOMYCO</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="dynoB">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="action-buttons">
                        <button class="btn btn-water" id="btnB" onclick="logWatering('B')">
                            üíß –ü–æ–ª–∏–ª!
                        </button>
                        <button class="btn btn-reset" onclick="resetCanister('B')">‚Ü∫</button>
                    </div>
                    <div class="recipe-reminder" id="recipeB">
                        <strong>üìã –†–µ—Ü–µ–ø—Ç:</strong>
                        CalMag ‚Üí PPM 120 ‚Üí Universal 6 –º–ª/–ª ‚Üí pH 6.0-6.5
                    </div>
                </div>
            </div>

            <!-- Canister C -->
            <div class="canister-tracker c" id="canisterC">
                <div class="canister-header">
                    <div>
                        <div class="canister-title">–ö–∞–Ω–∏—Å—Ç—Ä–∞ C</div>
                        <div class="canister-subtitle">–ù–µ–ø—Ä–∏—Ö–æ—Ç–ª–∏–≤—ã–µ ‚Ä¢ PPM 150 ‚Ä¢ pH 6.2-6.7</div>
                    </div>
                </div>
                <div class="canister-body">
                    <div class="watering-counter" id="counterC">
                        <div class="watering-dot" data-num="1">1</div>
                        <div class="watering-dot" data-num="2">2</div>
                        <div class="watering-dot" data-num="3">3</div>
                        <div class="watering-dot flush" data-num="4">4</div>
                    </div>
                    <div class="watering-status status-feed" id="statusC">
                        üåø –°–ª–µ–¥—É—é—â–∏–π: –ø–æ–ª–∏–≤ —Å —É–¥–æ–±—Ä–µ–Ω–∏—è–º–∏
                    </div>
                    <div class="last-watered">
                        <span class="last-watered-label">–ü–æ—Å–ª–µ–¥–Ω–∏–π –ø–æ–ª–∏–≤:</span>
                        <span>
                            <span class="last-watered-date" id="lastDateC">‚Äî</span>
                            <span class="days-ago" id="daysAgoC"></span>
                        </span>
                    </div>
                    <div class="dynomyco-toggle">
                        <span class="dynomyco-label">üçÑ –î–æ–±–∞–≤–∏—Ç—å DYNOMYCO</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="dynoC">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="action-buttons">
                        <button class="btn btn-water" id="btnC" onclick="logWatering('C')">
                            üíß –ü–æ–ª–∏–ª!
                        </button>
                        <button class="btn btn-reset" onclick="resetCanister('C')">‚Ü∫</button>
                    </div>
                    <div class="recipe-reminder" id="recipeC">
                        <strong>üìã –†–µ—Ü–µ–ø—Ç:</strong>
                        CalMag ‚Üí PPM 150 ‚Üí Universal 6 –º–ª/–ª ‚Üí pH 6.2-6.7
                    </div>
                </div>
            </div>
        </div>

        <!-- History -->
        <div class="history-section">
            <h3>üìú –ò—Å—Ç–æ—Ä–∏—è –ø–æ–ª–∏–≤–æ–≤</h3>
            <div class="history-list" id="historyList">
                <div style="color: #718096; text-align: center; padding: 20px;">
                    –ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞. –ù–∞—á–Ω–∏ –ø–æ–ª–∏–≤–∞—Ç—å!
                </div>
            </div>
            <button class="clear-history" onclick="clearHistory()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é</button>
        </div>
    </div>

    <script>
        // Data structure
        let data = {
            canisters: {
                A: { count: 0, lastDate: null, dynoCount: 0 },
                B: { count: 0, lastDate: null, dynoCount: 0 },
                C: { count: 0, lastDate: null, dynoCount: 0 }
            },
            history: [],
            totalWaterings: 0,
            totalFlushes: 0,
            totalDyno: 0
        };

        // Load from localStorage
        function loadData() {
            const saved = localStorage.getItem('wateringTracker');
            if (saved) {
                data = JSON.parse(saved);
            }
            updateAllUI();
        }

        // Save to localStorage
        function saveData() {
            localStorage.setItem('wateringTracker', JSON.stringify(data));
        }

        // Log watering
        function logWatering(canister) {
            const c = data.canisters[canister];
            const isFlush = c.count === 3;
            const hasDyno = document.getElementById('dyno' + canister).checked;

            c.count = (c.count + 1) % 4;
            c.lastDate = new Date().toISOString();

            if (hasDyno) {
                c.dynoCount++;
                data.totalDyno++;
            }

            data.totalWaterings++;
            if (isFlush) {
                data.totalFlushes++;
            }

            // Add to history
            data.history.unshift({
                canister: canister,
                type: isFlush ? 'flush' : 'feed',
                dyno: hasDyno,
                date: new Date().toISOString()
            });

            // Keep only last 50 entries
            if (data.history.length > 50) {
                data.history = data.history.slice(0, 50);
            }

            // Reset dyno checkbox
            document.getElementById('dyno' + canister).checked = false;

            saveData();
            updateAllUI();
        }

        // Reset canister
        function resetCanister(canister) {
            if (confirm('–°–±—Ä–æ—Å–∏—Ç—å —Å—á—ë—Ç—á–∏–∫ –∫–∞–Ω–∏—Å—Ç—Ä—ã ' + canister + '?')) {
                data.canisters[canister].count = 0;
                saveData();
                updateAllUI();
            }
        }

        // Clear history
        function clearHistory() {
            if (confirm('–û—á–∏—Å—Ç–∏—Ç—å –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é?')) {
                data.history = [];
                data.totalWaterings = 0;
                data.totalFlushes = 0;
                data.totalDyno = 0;
                saveData();
                updateAllUI();
            }
        }

        // Update UI for one canister
        function updateCanisterUI(canister) {
            const c = data.canisters[canister];
            const counter = document.getElementById('counter' + canister);
            const status = document.getElementById('status' + canister);
            const btn = document.getElementById('btn' + canister);
            const recipe = document.getElementById('recipe' + canister);
            const lastDate = document.getElementById('lastDate' + canister);
            const daysAgo = document.getElementById('daysAgo' + canister);

            // Update dots
            const dots = counter.querySelectorAll('.watering-dot');
            dots.forEach((dot, i) => {
                dot.classList.remove('completed', 'current');
                if (i < c.count) {
                    dot.classList.add('completed');
                } else if (i === c.count) {
                    dot.classList.add('current');
                }
            });

            // Update status
            const isFlush = c.count === 3;
            if (isFlush) {
                status.className = 'watering-status status-flush';
                status.innerHTML = 'üöø –°–ª–µ–¥—É—é—â–∏–π: –ü–†–û–ú–´–í–ö–ê (–±–µ–∑ —É–¥–æ–±—Ä–µ–Ω–∏–π)';
                btn.className = 'btn btn-water flush';
                btn.innerHTML = 'üöø –ü—Ä–æ–º—ã–ª!';
                recipe.className = 'recipe-reminder flush';
                recipe.innerHTML = '<strong>üìã –†–µ—Ü–µ–ø—Ç –ø—Ä–æ–º—ã–≤–∫–∏:</strong>CalMag ‚Üí PPM ' +
                    (canister === 'A' ? '80' : canister === 'B' ? '120' : '150') +
                    ' ‚Üí –ë–ï–ó —É–¥–æ–±—Ä–µ–Ω–∏–π ‚Üí pH';
            } else {
                status.className = 'watering-status status-feed';
                status.innerHTML = 'üåø –°–ª–µ–¥—É—é—â–∏–π: –ø–æ–ª–∏–≤ —Å —É–¥–æ–±—Ä–µ–Ω–∏—è–º–∏';
                btn.className = 'btn btn-water';
                btn.innerHTML = 'üíß –ü–æ–ª–∏–ª!';
                recipe.className = 'recipe-reminder';
                const dose = canister === 'A' ? '1.5' : '6';
                const ppm = canister === 'A' ? '80' : canister === 'B' ? '120' : '150';
                const ph = canister === 'A' ? '5.8-6.3' : canister === 'B' ? '6.0-6.5' : '6.2-6.7';
                recipe.innerHTML = '<strong>üìã –†–µ—Ü–µ–ø—Ç:</strong>CalMag ‚Üí PPM ' + ppm +
                    ' ‚Üí Universal ' + dose + ' –º–ª/–ª ‚Üí pH ' + ph;
            }

            // Update last date
            if (c.lastDate) {
                const date = new Date(c.lastDate);
                lastDate.textContent = date.toLocaleDateString('ru-RU');
                const days = Math.floor((new Date() - date) / (1000 * 60 * 60 * 24));
                if (days === 0) {
                    daysAgo.textContent = '(—Å–µ–≥–æ–¥–Ω—è)';
                } else if (days === 1) {
                    daysAgo.textContent = '(–≤—á–µ—Ä–∞)';
                } else {
                    daysAgo.textContent = '(' + days + ' –¥–Ω. –Ω–∞–∑–∞–¥)';
                }
            } else {
                lastDate.textContent = '‚Äî';
                daysAgo.textContent = '';
            }
        }

        // Update history list
        function updateHistory() {
            const list = document.getElementById('historyList');
            if (data.history.length === 0) {
                list.innerHTML = '<div style="color: #718096; text-align: center; padding: 20px;">–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞. –ù–∞—á–Ω–∏ –ø–æ–ª–∏–≤–∞—Ç—å!</div>';
                return;
            }

            list.innerHTML = data.history.map(h => {
                const date = new Date(h.date);
                const dateStr = date.toLocaleDateString('ru-RU') + ' ' +
                    date.toLocaleTimeString('ru-RU', {hour: '2-digit', minute: '2-digit'});
                return `
                    <div class="history-item">
                        <span class="history-canister ${h.canister.toLowerCase()}">${h.canister}</span>
                        <span class="history-type ${h.type}">${h.type === 'flush' ? 'üöø –ü—Ä–æ–º—ã–≤–∫–∞' : 'üåø –£–¥–æ–±—Ä–µ–Ω–∏–µ'}${h.dyno ? ' +üçÑ' : ''}</span>
                        <span class="history-date">${dateStr}</span>
                    </div>
                `;
            }).join('');
        }

        // Update summary
        function updateSummary() {
            document.getElementById('totalWaterings').textContent = data.totalWaterings;
            document.getElementById('totalFlushes').textContent = data.totalFlushes;
            document.getElementById('dynoCount').textContent = data.totalDyno;
        }

        // Update all UI
        function updateAllUI() {
            updateCanisterUI('A');
            updateCanisterUI('B');
            updateCanisterUI('C');
            updateHistory();
            updateSummary();
        }

        // Init
        loadData();
    </script>
</body>
</html>
